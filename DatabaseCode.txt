

### TEMPORARILY DISABLES REFERENTIAL CONSTRAINTS ###
### ALLOWS FOR THE RECREATION OF TABLES AND INPUT OF DATA IN ANY ORDER ###
SET FOREIGN_KEY_CHECKS = 0;

CREATE DATABASE TEACHING_DATABASE;
USE TEACHING_DATABASE;
### 'DROP TABLE' DELETES TABLE AND DATA IF EXISTENT ###
### 'IF EXISTS' ALLOWS STATEMENT TO SUCCEED WITHOUT ERROR EVEN IF TABLE DOES NOT EXIST ###
### PURPOSE IS TO REMOVE EXISTING STORED VIEWS AND PROCEDURES TO AVOID REDUCING PROGRAM ###
### SPEED DUE TO STORAGE OF UNNECESSARY DATA ###
DROP TABLE IF EXISTS STAFF;
DROP TABLE IF EXISTS TEACHING_EXPERIENCE;
DROP TABLE IF EXISTS OTHER_EXPERIENCE;
DROP TABLE IF EXISTS DOCUMENTS;
DROP TABLE IF EXISTS PUBLICATIONS;
DROP TABLE IF EXISTS ADDITIONAL_NOTES;
DROP TABLE IF EXISTS QUALIFICATIONS;
DROP TABLE IF EXISTS AQF_LEVELS;
DROP TABLE IF EXISTS APPROVAL;
DROP TABLE IF EXISTS REVIEW;

### RE-ENABLES CHECKING OF FOREIGN KEY CONSTRAINTS AND INCONSITENCIES ###
SET FOREIGN_KEY_CHECKS = 1;

### CREATION OF DATABASE TABLES ###
### CREATION OF REQUIRED ENTITIES AND SET INPUT VALUE RESTRICTIONS AND REQUIREMENTS ###
### SET PRIMARY KEYS AND FOREIGN KEYS OF DATABASE TABLES ###
CREATE TABLE IF NOT EXISTS STAFF (
	STAFF_ID INT(10) NOT NULL AUTO_INCREMENT,
	TITLE VARCHAR(5) NOT NULL,
	FIRST_NAME VARCHAR(50) NOT NULL,
	LAST_NAME VARCHAR(50) NOT NULL,
	ADDRESS VARCHAR(50) NOT NULL,
	EMAIL VARCHAR(100) NOT NULL,
	PHONE INT(10) NOT NULL,
    PRIMARY KEY (STAFF_ID)
);

CREATE TABLE IF NOT EXISTS TEACHING_EXPERIENCE (
	STAFF_ID INT(10) NOT NULL, 
	JOINING_DATE DATE NOT NULL, 
	FINISH_DATE DATE NOT NULL, 
	COURSE_ID int(10) NOT NULL,
	COURSE_TITLE VARCHAR(50) NOT NULL, 
	ORGANISATION_ID INT(10) NOT NULL, 
	ROLE_ID INT(10) NOT NULL,
    CONSTRAINT FK_TEACHING_EXPERIENCE_STAFF_ID FOREIGN KEY (STAFF_ID) 
    REFERENCES STAFF(STAFF_ID)
);

CREATE TABLE IF NOT EXISTS OTHER_EXPERIENCE (
	STAFF_ID INT(10) NOT NULL,
	EMP_NAME VARCHAR(50) NOT NULL,
	POSITION VARCHAR(50),
	WORK_STATUS VARCHAR(50),
	JOINING_DATE DATE NOT NULL, 
	FINISH_DATE DATE NOT NULL,
	DUTIES VARCHAR(250),
    CONSTRAINT FK_OTHER_EXPERIENCE_STAFF_ID FOREIGN KEY (STAFF_ID) 
    REFERENCES STAFF(STAFF_ID)
    );

CREATE TABLE IF NOT EXISTS DOCUMENTS (
	DOC_ID INT(10) NOT NULL AUTO_INCREMENT, 
	STAFF_ID INT(10) NOT NULL, 
	DOC_NAME VARCHAR(100) NOT NULL, 
	DOC_SIGHTED_DATE DATE NOT NULL, 
	DOC_SIGHTED_USER_ID VARCHAR(10) NOT NULL,
	PRIMARY KEY (DOC_ID),
	CONSTRAINT FK_DOCUMENTS_STAFF_ID FOREIGN KEY (STAFF_ID) 
    REFERENCES STAFF(STAFF_ID)
);

CREATE TABLE IF NOT EXISTS PUBLICATIONS (
	PUBLICATION_ID INT(10) NOT NULL AUTO_INCREMENT, 
	STAFF_ID INT(10) NOT NULL, 
	PUBLICATION_TITLE VARCHAR(100) NOT NULL, 
	PUBLICATION_YEAR INT(4) NOT NULL, 
	PUBLICATION_TYPE VARCHAR(100) NOT NULL, 
	PEER_REVIEWED VARCHAR(3) NOT NULL, 
	CLASSIFICATION VARCHAR(50) NOT NULL, 
	PRIMARY KEY (PUBLICATION_ID),
	CONSTRAINT FK_PUBLICATIONS_STAFF_ID FOREIGN KEY (STAFF_ID) 
    REFERENCES STAFF(STAFF_ID)
);

CREATE TABLE IF NOT EXISTS ADDITIONAL_NOTES (
	STAFF_ID INT(10) NOT NULL,
	NOTES VARCHAR(250),
	RECORDED_BY VARCHAR(50) NOT NULL,
	RECORDER_DATE DATE NOT NULL,
	CONSTRAINT FK_ADDITIONAL_NOTES_STAFF_ID FOREIGN KEY (STAFF_ID) 
    REFERENCES STAFF(STAFF_ID)
);

CREATE TABLE IF NOT EXISTS QUALIFICATIONS (
	STAFF_ID INT(10) NOT NULL, 
	AQF_Level_ID INT(10) NOT NULL, 
    QUALIFICATION_NAME VARCHAR(100) NOT NULL,
	SUBJECT_AREA VARCHAR(100) NOT NULL, 
	INSTITUTION_NAME VARCHAR(100) NOT NULL, 
	INSTITUTION_COUNTRY VARCHAR(100) NOT NULL, 
	YEAR_ISSUED INT(4),
    PRIMARY KEY (AQF_LEVEL_ID),
	CONSTRAINT FK_QUALIFICATIONS_STAFF_ID FOREIGN KEY (STAFF_ID) 
    REFERENCES STAFF(STAFF_ID)
);

CREATE TABLE IF NOT EXISTS AQF_LEVELS (
	AQF_LEVEL_ID INT(10) NOT NULL AUTO_INCREMENT, 
	QUALIFICATION_DEGREE VARCHAR(100) NOT NULL,
	AQF_LEVEL VARCHAR(20) NOT NULL,  
	QUALIFICATION_REQUIREMENT VARCHAR(20) NOT NULL,  
	CONSTRAINT FK_AQF_LEVEL_ID FOREIGN KEY (AQF_LEVEL_ID) 
    REFERENCES QUALIFICATIONS(AQF_LEVEL_ID)
);

CREATE TABLE IF NOT EXISTS APPROVAL (
	APPROVAL_ID INT(10) NOT NULL AUTO_INCREMENT, 
	STAFF_ID INT(10) NOT NULL, 
	NEXT_REVIEW_DATE DATE, 
	APPROVAL_DATE DATE NOT NULL, 
	TEACHING_LOCATION VARCHAR(50) NOT NULL, 
	AQF_LEVEL_ID INT(10) NOT NULL, 
	AADMIN_MANAGER_ID INT(10) NOT NULL, 
	COURSE_ID INT(10) NOT NULL, 
	PRIMARY KEY (APPROVAL_ID),
    CONSTRAINT FK_APPROVAL_AQF_LEVEL_ID FOREIGN KEY (AQF_LEVEL_ID) 
    REFERENCES QUALIFICATIONS(AQF_LEVEL_ID)
);

CREATE TABLE IF NOT EXISTS REVIEW (
	REVIEW_ID INT(10) NOT NULL AUTO_INCREMENT, 
    APPROVAL_ID INT(10) NOT NULL,
	REVIEW_DATE DATE NOT NULL, 
	ADMING_MANAGER_ID INT(10) NOT NULL, 
	OUTCOME VARCHAR(50) NOT NULL, 
	PRIMARY KEY (Review_ID),
	CONSTRAINT FK_REVIEW_APPROVAL_ID FOREIGN KEY (APPROVAL_ID) 
    REFERENCES APPROVAL(APPROVAL_ID)
);
    